{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-2xl border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/admin/notifications/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Bell, Check, Trash2, AlertTriangle, Info, CheckCheck, Printer } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport toast from 'react-hot-toast';\n\ninterface Notification {\n  id: number;\n  message: string;\n  type: string;\n  created_at: string;\n  read_at: string | null;\n  is_read: boolean;\n  item_id: number | null;\n  item_name: string | null;\n  metadata: any;\n}\n\nexport default function NotificationsPage() {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<'all' | 'unread'>('all');\n\n  const fetchNotifications = async () => {\n    setLoading(true);\n    try {\n      const url = filter === 'unread' ? '/api/notifications?unread=true' : '/api/notifications';\n      const response = await fetch(url);\n      const data = await response.json();\n      setNotifications(data.notifications || []);\n    } catch (error) {\n      console.error('Failed to fetch notifications:', error);\n      toast.error('Erro ao carregar notificações');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotifications();\n  }, [filter]);\n\n  const markAsRead = async (notificationId: number) => {\n    try {\n      const response = await fetch('/api/notifications', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ notificationId })\n      });\n\n      if (response.ok) {\n        setNotifications(prev => \n          prev.map(n => \n            n.id === notificationId \n              ? { ...n, is_read: true, read_at: new Date().toISOString() }\n              : n\n          )\n        );\n        toast.success('Notificação marcada como lida');\n      }\n    } catch (error) {\n      console.error('Failed to mark as read:', error);\n      toast.error('Erro ao marcar como lida');\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      const response = await fetch('/api/notifications', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ markAllRead: true })\n      });\n\n      if (response.ok) {\n        setNotifications(prev => \n          prev.map(n => ({ ...n, is_read: true, read_at: new Date().toISOString() }))\n        );\n        toast.success('Todas as notificações foram marcadas como lidas');\n      }\n    } catch (error) {\n      console.error('Failed to mark all as read:', error);\n      toast.error('Erro ao marcar todas como lidas');\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'printer_missing':\n        return <Printer className=\"h-5 w-5 text-red-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />;\n      default:\n        return <Info className=\"h-5 w-5 text-blue-500\" />;\n    }\n  };\n\n  const getNotificationBadge = (type: string) => {\n    switch (type) {\n      case 'printer_missing':\n        return <Badge className=\"bg-red-100 text-red-700\">Impressora</Badge>;\n      case 'warning':\n        return <Badge className=\"bg-yellow-100 text-yellow-700\">Aviso</Badge>;\n      default:\n        return <Badge className=\"bg-blue-100 text-blue-700\">Info</Badge>;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl\">\n            <Bell className=\"h-6 w-6 text-white\" />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n              Notificações\n            </h1>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Gerencie avisos e alertas do sistema\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          {/* Filter buttons */}\n          <div className=\"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\n            <Button\n              variant={filter === 'all' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setFilter('all')}\n              className={filter === 'all' ? 'bg-orange-600 hover:bg-orange-700' : ''}\n            >\n              Todas\n            </Button>\n            <Button\n              variant={filter === 'unread' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setFilter('unread')}\n              className={filter === 'unread' ? 'bg-orange-600 hover:bg-orange-700' : ''}\n            >\n              Não Lidas\n            </Button>\n          </div>\n\n          {/* Mark all as read */}\n          {notifications.some(n => !n.is_read) && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={markAllAsRead}\n              className=\"gap-2\"\n            >\n              <CheckCheck className=\"h-4 w-4\" />\n              Marcar todas como lidas\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Notifications List */}\n      {loading ? (\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600\"></div>\n        </div>\n      ) : notifications.length === 0 ? (\n        <Card className=\"p-12 text-center\">\n          <Bell className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <h2 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">\n            Nenhuma notificação\n          </h2>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            {filter === 'unread' \n              ? 'Você não tem notificações não lidas' \n              : 'Não há notificações no momento'}\n          </p>\n        </Card>\n      ) : (\n        <div className=\"space-y-2\">\n          {notifications.map((notification) => (\n            <Card \n              key={notification.id}\n              className={`p-4 transition-all ${\n                !notification.is_read \n                  ? 'bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800' \n                  : 'bg-white dark:bg-gray-900'\n              }`}\n            >\n              <div className=\"flex items-start gap-4\">\n                {/* Icon */}\n                <div className=\"mt-1\">\n                  {getNotificationIcon(notification.type)}\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"space-y-1\">\n                      <div className=\"flex items-center gap-2\">\n                        {getNotificationBadge(notification.type)}\n                        {!notification.is_read && (\n                          <Badge className=\"bg-orange-600 text-white text-xs\">\n                            Nova\n                          </Badge>\n                        )}\n                      </div>\n                      <p className=\"text-gray-900 dark:text-gray-100\">\n                        {notification.message}\n                      </p>\n                      {notification.metadata && (\n                        <div className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n                          {notification.metadata.table && (\n                            <div>Mesa: {notification.metadata.table}</div>\n                          )}\n                          {notification.metadata.quantity && (\n                            <div>Quantidade: {notification.metadata.quantity}</div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {format(new Date(notification.created_at), \"dd 'de' MMM 'às' HH:mm\", { locale: ptBR })}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  {!notification.is_read && (\n                    <div className=\"flex items-center gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => markAsRead(notification.id)}\n                        className=\"gap-2\"\n                      >\n                        <Check className=\"h-3 w-3\" />\n                        Marcar como lida\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}