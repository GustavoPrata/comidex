{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/tablet/config/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n)\n\n// Obter configurações do tablet\nexport async function GET() {\n  try {\n    const { data: config, error } = await supabase\n      .from('tablet_config')\n      .select('*')\n      .single()\n\n    if (error && error.code !== 'PGRST116') {\n      throw error\n    }\n\n    // Se não houver configuração, retornar padrão\n    if (!config) {\n      return NextResponse.json({\n        idle_time: 60000, // 60 segundos\n        lock_password: '0000',\n        enable_rodizio: true,\n        enable_carte: true,\n        require_table_number: true,\n        allow_partial_send: true,\n        show_history: true,\n        theme_color: '#FF6B00'\n      })\n    }\n\n    return NextResponse.json(config)\n  } catch (error: any) {\n    console.error('Erro ao buscar configuração:', error)\n    return NextResponse.json(\n      { error: error.message || 'Erro ao buscar configuração' },\n      { status: 500 }\n    )\n  }\n}\n\n// Atualizar configurações\nexport async function POST(request: NextRequest) {\n  try {\n    const data = await request.json()\n\n    // Verificar se já existe uma configuração\n    const { data: existing } = await supabase\n      .from('tablet_config')\n      .select('id')\n      .single()\n\n    let result\n    if (existing) {\n      // Atualizar configuração existente\n      result = await supabase\n        .from('tablet_config')\n        .update(data)\n        .eq('id', existing.id)\n        .select()\n        .single()\n    } else {\n      // Criar nova configuração\n      result = await supabase\n        .from('tablet_config')\n        .insert(data)\n        .select()\n        .single()\n    }\n\n    if (result.error) {\n      throw result.error\n    }\n\n    return NextResponse.json({\n      success: true,\n      config: result.data\n    })\n  } catch (error: any) {\n    console.error('Erro ao atualizar configuração:', error)\n    return NextResponse.json(\n      { error: error.message || 'Erro ao atualizar configuração' },\n      { status: 500 }\n    )\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,IAAA,yMAAY;AAMtB,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,MAAM;QAET,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY;YACtC,MAAM;QACR;QAEA,8CAA8C;QAC9C,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,WAAW;gBACX,eAAe;gBACf,gBAAgB;gBAChB,cAAc;gBACd,sBAAsB;gBACtB,oBAAoB;gBACpB,cAAc;gBACd,aAAa;YACf;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAA8B,GACxD;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,0CAA0C;QAC1C,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,MAAM;QAET,IAAI;QACJ,IAAI,UAAU;YACZ,mCAAmC;YACnC,SAAS,MAAM,SACZ,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,SAAS,EAAE,EACpB,MAAM,GACN,MAAM;QACX,OAAO;YACL,0BAA0B;YAC1B,SAAS,MAAM,SACZ,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,MAAM,GACN,MAAM;QACX;QAEA,IAAI,OAAO,KAAK,EAAE;YAChB,MAAM,OAAO,KAAK;QACpB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,QAAQ,OAAO,IAAI;QACrB;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAiC,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}