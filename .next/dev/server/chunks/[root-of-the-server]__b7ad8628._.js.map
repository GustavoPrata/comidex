{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/prompt-message/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    \n    // Se for comando de limpar\n    if (body.clear) {\n      try {\n        const response = await fetch('http://localhost:3001/console-prompt', {\n          method: 'DELETE'\n        })\n        \n        if (response.ok) {\n          return NextResponse.json({ success: true })\n        } else {\n          throw new Error('Erro ao limpar console')\n        }\n      } catch (error) {\n        return NextResponse.json(\n          { error: 'Console Prompt Workflow não está rodando' },\n          { status: 503 }\n        )\n      }\n    }\n    \n    // Enviar mensagem normal\n    const { message, imageId } = body\n    let prompt = message || ''\n    const images = []\n    \n    if (imageId) {\n      images.push(`attachments/${imageId}.jpg`)\n    }\n    \n    try {\n      const response = await fetch('http://localhost:3001/console-prompt', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ prompt, images })\n      })\n      \n      if (response.ok) {\n        return NextResponse.json({ success: true })\n      } else {\n        throw new Error('Erro ao enviar mensagem')\n      }\n    } catch (error) {\n      return NextResponse.json(\n        { error: 'Console Prompt Workflow não está rodando' },\n        { status: 503 }\n      )\n    }\n  } catch (error) {\n    return NextResponse.json(\n      { error: 'Erro ao processar requisição' },\n      { status: 500 }\n    )\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,2BAA2B;QAC3B,IAAI,KAAK,KAAK,EAAE;YACd,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,wCAAwC;oBACnE,QAAQ;gBACV;gBAEA,IAAI,SAAS,EAAE,EAAE;oBACf,OAAO,gJAAY,CAAC,IAAI,CAAC;wBAAE,SAAS;oBAAK;gBAC3C,OAAO;oBACL,MAAM,IAAI,MAAM;gBAClB;YACF,EAAE,OAAO,OAAO;gBACd,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAA2C,GACpD;oBAAE,QAAQ;gBAAI;YAElB;QACF;QAEA,yBAAyB;QACzB,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;QAC7B,IAAI,SAAS,WAAW;QACxB,MAAM,SAAS,EAAE;QAEjB,IAAI,SAAS;YACX,OAAO,IAAI,CAAC,CAAC,YAAY,EAAE,QAAQ,IAAI,CAAC;QAC1C;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,wCAAwC;gBACnE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAQ;gBAAO;YACxC;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,OAAO,gJAAY,CAAC,IAAI,CAAC;oBAAE,SAAS;gBAAK;YAC3C,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,OAAO;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA2C,GACpD;gBAAE,QAAQ;YAAI;QAElB;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}