{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabase/fallback-client.ts"],"sourcesContent":["// Fallback client para desenvolvimento sem banco configurado\nimport { toast } from \"sonner\"\n\nconst mockData = {\n  categories: [\n    { id: '1', name: 'Sashimis', description: 'Peixes crus fatiados', active: true, sort_order: 1 },\n    { id: '2', name: 'Niguiris', description: 'Bolinhos de arroz com peixe', active: true, sort_order: 2 },\n    { id: '3', name: 'Hot Rolls', description: 'Rolos empanados e fritos', active: true, sort_order: 3 },\n    { id: '4', name: 'Temakis', description: 'Cones de alga com recheio', active: true, sort_order: 4 },\n    { id: '5', name: 'Yakissobas', description: 'Macarr√£o japon√™s salteado', active: true, sort_order: 5 },\n  ],\n  restaurant_tables: [\n    { id: '1', name: 'Mesa 1', number: 1, capacity: 4, type: 'table', active: true },\n    { id: '2', name: 'Mesa 2', number: 2, capacity: 4, type: 'table', active: true },\n    { id: '3', name: 'Mesa 3', number: 3, capacity: 6, type: 'table', active: true },\n    { id: '4', name: 'Mesa VIP', number: 10, capacity: 10, type: 'table', active: true },\n    { id: '5', name: 'Balc√£o 1', number: 11, capacity: 1, type: 'counter', active: true },\n  ],\n  table_sessions: [\n    { id: '1', table_id: '1', status: 'active', created_at: new Date().toISOString() },\n    { id: '2', table_id: '3', status: 'active', created_at: new Date().toISOString() },\n  ],\n  items: [\n    { id: '1', name: 'Salm√£o', description: 'Sashimi de salm√£o fresco', price: 25, available: true },\n    { id: '2', name: 'Atum', description: 'Sashimi de atum', price: 30, available: true },\n    { id: '3', name: 'Hot Philadelphia', description: 'Hot roll com cream cheese', price: 35, available: true },\n  ],\n  orders: []\n}\n\nexport function createFallbackClient() {\n  console.log('üü® Usando dados locais de desenvolvimento')\n  \n  return {\n    from: (table: string) => ({\n      select: (columns?: string) => ({\n        eq: (column: string, value: any) => ({\n          data: null,\n          error: null\n        }),\n        gte: (column: string, value: any) => ({\n          data: null, \n          error: null\n        }),\n        order: (column: string, options?: any) => ({\n          limit: (count: number) => ({\n            data: mockData[table as keyof typeof mockData] || [],\n            error: null\n          }),\n          data: mockData[table as keyof typeof mockData] || [],\n          error: null\n        }),\n        limit: (count: number) => ({\n          data: mockData[table as keyof typeof mockData]?.slice(0, count) || [],\n          error: null\n        }),\n        in: (column: string, values: any[]) => ({\n          data: mockData[table as keyof typeof mockData] || [],\n          error: null\n        }),\n        data: mockData[table as keyof typeof mockData] || [],\n        error: null\n      }),\n      \n      insert: (data: any) => ({\n        select: () => ({\n          data: [{ ...data, id: Date.now().toString() }],\n          error: null\n        }),\n        data: { ...data, id: Date.now().toString() },\n        error: null\n      }),\n      \n      update: (data: any) => ({\n        eq: (column: string, value: any) => {\n          const items = mockData[table as keyof typeof mockData] as any[]\n          const index = items?.findIndex((item: any) => item[column] === value)\n          if (index !== -1 && items) {\n            items[index] = { ...items[index], ...data }\n          }\n          return { data: items?.[index], error: null }\n        }\n      }),\n      \n      delete: () => ({\n        eq: (column: string, value: any) => {\n          const items = mockData[table as keyof typeof mockData] as any[]\n          const index = items?.findIndex((item: any) => item[column] === value)\n          if (index !== -1 && items) {\n            items.splice(index, 1)\n          }\n          return { data: null, error: null }\n        }\n      })\n    })\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabase/auto-detect.ts"],"sourcesContent":["// Sistema inteligente para detectar e usar as vari√°veis corretas do Supabase\n// Detecta automaticamente se as vari√°veis est√£o invertidas e usa corretamente\n\nexport function getSupabaseConfig() {\n  const env1 = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\n  const env2 = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\n  \n  let supabaseUrl: string | null = null\n  let supabaseKey: string | null = null\n  \n  // Detectar qual √© URL e qual √© Key\n  if (env1.startsWith('https://') && env1.includes('.supabase.')) {\n    // env1 √© a URL\n    supabaseUrl = env1\n    supabaseKey = env2\n  } else if (env2.startsWith('https://') && env2.includes('.supabase.')) {\n    // env2 √© a URL (vari√°veis invertidas!)\n    supabaseUrl = env2\n    supabaseKey = env1\n  } else if (env1.startsWith('eyJ')) {\n    // env1 √© a Key (JWT sempre come√ßa com eyJ)\n    supabaseKey = env1\n    supabaseUrl = env2\n  } else if (env2.startsWith('eyJ')) {\n    // env2 √© a Key\n    supabaseKey = env2\n    supabaseUrl = env1\n  }\n  \n  // Valida√ß√£o final\n  const isValid = \n    supabaseUrl && \n    supabaseKey && \n    supabaseUrl.startsWith('https://') && \n    supabaseUrl.includes('.supabase.') &&\n    supabaseKey.startsWith('eyJ')\n  \n  if (isValid) {\n    // Log seguro sem expor dados sens√≠veis\n    if (process.env.NODE_ENV === 'development') {\n      console.log('‚úÖ Supabase configurado corretamente!')\n    }\n    return {\n      url: supabaseUrl!,\n      anonKey: supabaseKey!,\n      configured: true\n    }\n  } else {\n    console.warn('‚ö†Ô∏è Supabase n√£o configurado ou vari√°veis inv√°lidas')\n    return {\n      url: null,\n      anonKey: null,\n      configured: false\n    }\n  }\n}"],"names":[],"mappings":"AAAA,6EAA6E;AAC7E,8EAA8E;;;;;AAEvE,SAAS;IACd,MAAM,OAAO,wPAAwC;IACrD,MAAM,OAAO,gFAA6C;IAE1D,IAAI,cAA6B;IACjC,IAAI,cAA6B;IAEjC,mCAAmC;IACnC,IAAI,KAAK,UAAU,CAAC,eAAe,KAAK,QAAQ,CAAC,eAAe;QAC9D,eAAe;QACf,cAAc;QACd,cAAc;IAChB,OAAO,IAAI,KAAK,UAAU,CAAC,eAAe,KAAK,QAAQ,CAAC,eAAe;QACrE,uCAAuC;QACvC,cAAc;QACd,cAAc;IAChB,OAAO,IAAI,KAAK,UAAU,CAAC,QAAQ;QACjC,2CAA2C;QAC3C,cAAc;QACd,cAAc;IAChB,OAAO,IAAI,KAAK,UAAU,CAAC,QAAQ;QACjC,eAAe;QACf,cAAc;QACd,cAAc;IAChB;IAEA,kBAAkB;IAClB,MAAM,UACJ,eACA,eACA,YAAY,UAAU,CAAC,eACvB,YAAY,QAAQ,CAAC,iBACrB,YAAY,UAAU,CAAC;IAEzB,IAAI,SAAS;QACX,uCAAuC;QACvC,wCAA4C;YAC1C,QAAQ,GAAG,CAAC;QACd;QACA,OAAO;YACL,KAAK;YACL,SAAS;YACT,YAAY;QACd;IACF,OAAO;QACL,QAAQ,IAAI,CAAC;QACb,OAAO;YACL,KAAK;YACL,SAAS;YACT,YAAY;QACd;IACF;AACF","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database'\nimport { createFallbackClient } from './fallback-client'\nimport { getSupabaseConfig } from './auto-detect'\n\nexport async function createClient() {\n  // Detecta automaticamente a configura√ß√£o correta\n  const config = getSupabaseConfig()\n  \n  if (!config.configured || !config.url || !config.anonKey) {\n    console.warn('‚ö†Ô∏è [Server] Supabase n√£o configurado - usando dados locais')\n    return createFallbackClient() as any\n  }\n  \n  try {\n    // Log seguro sem expor informa√ß√µes sens√≠veis\n    if (process.env.NODE_ENV === 'development') {\n      console.log('‚úÖ [Server] Conectando ao Supabase...')\n    }\n    const cookieStore = await cookies()\n\n    return createServerClient<Database>(\n      config.url,\n      config.anonKey,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          try {\n            cookieStore.set({ name, value, ...options })\n          } catch (error) {\n            // The `set` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n        remove(name: string, options: CookieOptions) {\n          try {\n            cookieStore.set({ name, value: '', ...options })\n          } catch (error) {\n            // The `delete` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n  } catch (error) {\n    console.error('‚ùå [Server] Erro ao conectar com Supabase:', error)\n    return createFallbackClient() as any\n  }\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAEA;AACA;;;;;AAEO,eAAe;IACpB,iDAAiD;IACjD,MAAM,SAAS,IAAA,wJAAiB;IAEhC,IAAI,CAAC,OAAO,UAAU,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,OAAO,EAAE;QACxD,QAAQ,IAAI,CAAC;QACb,OAAO,IAAA,+JAAoB;IAC7B;IAEA,IAAI;QACF,6CAA6C;QAC7C,wCAA4C;YAC1C,QAAQ,GAAG,CAAC;QACd;QACA,MAAM,cAAc,MAAM,IAAA,4IAAO;QAEjC,OAAO,IAAA,iMAAkB,EACvB,OAAO,GAAG,EACV,OAAO,OAAO,EAChB;YACE,SAAS;gBACP,KAAI,IAAY;oBACd,OAAO,YAAY,GAAG,CAAC,OAAO;gBAChC;gBACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;oBACrD,IAAI;wBACF,YAAY,GAAG,CAAC;4BAAE;4BAAM;4BAAO,GAAG,OAAO;wBAAC;oBAC5C,EAAE,OAAO,OAAO;oBACd,uDAAuD;oBACvD,wDAAwD;oBACxD,iBAAiB;oBACnB;gBACF;gBACA,QAAO,IAAY,EAAE,OAAsB;oBACzC,IAAI;wBACF,YAAY,GAAG,CAAC;4BAAE;4BAAM,OAAO;4BAAI,GAAG,OAAO;wBAAC;oBAChD,EAAE,OAAO,OAAO;oBACd,0DAA0D;oBAC1D,wDAAwD;oBACxD,iBAAiB;oBACnB;gBACF;YACF;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,OAAO,IAAA,+JAAoB;IAC7B;AACF","debugId":null}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/server/printer-service.ts"],"sourcesContent":["// Servi√ßo de impress√£o t√©rmica com comandos ESC/POS\nimport net from 'net';\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport os from 'os';\n\nconst execAsync = promisify(exec);\n\n// Comandos ESC/POS b√°sicos (compat√≠vel com maioria das impressoras t√©rmicas)\nconst ESC_POS = {\n  // Inicializa√ß√£o\n  INIT: Buffer.from([0x1b, 0x40]), // ESC @ - Initialize printer\n  \n  // Corte de papel\n  CUT_PARTIAL: Buffer.from([0x1d, 0x56, 0x01]), // GS V 1\n  CUT_FULL: Buffer.from([0x1d, 0x56, 0x00]),    // GS V 0\n  \n  // Alinhamento\n  ALIGN_LEFT: Buffer.from([0x1b, 0x61, 0x00]),   // ESC a 0\n  ALIGN_CENTER: Buffer.from([0x1b, 0x61, 0x01]), // ESC a 1\n  ALIGN_RIGHT: Buffer.from([0x1b, 0x61, 0x02]),  // ESC a 2\n  \n  // Tamanho do texto\n  TEXT_NORMAL: Buffer.from([0x1b, 0x21, 0x00]),  // ESC ! 0\n  TEXT_DOUBLE_HEIGHT: Buffer.from([0x1b, 0x21, 0x10]), // ESC ! 16\n  TEXT_DOUBLE_WIDTH: Buffer.from([0x1b, 0x21, 0x20]),  // ESC ! 32\n  TEXT_DOUBLE: Buffer.from([0x1b, 0x21, 0x30]),        // ESC ! 48\n  \n  // Negrito\n  BOLD_ON: Buffer.from([0x1b, 0x45, 0x01]),  // ESC E 1\n  BOLD_OFF: Buffer.from([0x1b, 0x45, 0x00]), // ESC E 0\n  \n  // Linha em branco\n  LINE_FEED: Buffer.from([0x0a]), // LF\n  \n  // Beep\n  BEEP: Buffer.from([0x1b, 0x42, 0x05, 0x09]), // ESC B 5 9\n  \n  // Abertura de gaveta\n  DRAWER_OPEN: Buffer.from([0x1b, 0x70, 0x00, 0x19, 0x19]), // ESC p 0 25 25\n};\n\nexport class ThermalPrinterService {\n  // Detectar impressoras no sistema\n  async detectPrinters(): Promise<any[]> {\n    const printers: any[] = [];\n    const platform = os.platform();\n    \n    try {\n      if (platform === 'win32') {\n        // Windows - usar WMIC para detectar impressoras\n        try {\n          const { stdout } = await execAsync('wmic printer get name,driverName,portName,shared,status /format:csv');\n          const lines = stdout.trim().split('\\n').slice(2); // Skip headers\n          \n          for (const line of lines) {\n            const parts = line.split(',');\n            if (parts.length >= 5) {\n              const [node, driverName, name, portName, shared, status] = parts;\n              if (name && name.trim()) {\n                printers.push({\n                  name: name.trim(),\n                  driver: driverName?.trim(),\n                  port: portName?.trim(),\n                  status: status?.trim(),\n                  shared: shared?.trim() === 'TRUE'\n                });\n              }\n            }\n          }\n        } catch (error) {\n          console.error('Erro ao detectar impressoras Windows:', error);\n        }\n      } else {\n        // Linux - verificar impressoras USB e seriais\n        try {\n          const { stdout } = await execAsync('ls /dev/usb/lp* 2>/dev/null || true');\n          if (stdout) {\n            const devices = stdout.trim().split('\\n').filter(Boolean);\n            devices.forEach(dev => {\n              printers.push({\n                name: path.basename(dev),\n                port: dev,\n                type: 'usb'\n              });\n            });\n          }\n        } catch {}\n        \n        // Verificar portas seriais\n        try {\n          const { stdout: serial } = await execAsync('ls /dev/ttyUSB* /dev/ttyS* 2>/dev/null || true');\n          if (serial) {\n            const devices = serial.trim().split('\\n').filter(Boolean);\n            devices.forEach(dev => {\n              printers.push({\n                name: path.basename(dev),\n                port: dev,\n                type: 'serial'\n              });\n            });\n          }\n        } catch {}\n      }\n    } catch (error) {\n      console.error('Erro ao detectar impressoras:', error);\n    }\n    \n    return printers;\n  }\n  \n  // Enviar dados para impressora via rede\n  async printToNetwork(ip: string, port: number, data: Buffer): Promise<boolean> {\n    return new Promise((resolve) => {\n      const client = new net.Socket();\n      \n      const timeout = setTimeout(() => {\n        client.destroy();\n        resolve(false);\n      }, 5000); // 5 segundos de timeout\n      \n      client.connect(port, ip, () => {\n        clearTimeout(timeout);\n        client.write(data);\n        client.end();\n      });\n      \n      client.on('error', () => {\n        clearTimeout(timeout);\n        resolve(false);\n      });\n      \n      client.on('close', () => {\n        clearTimeout(timeout);\n        resolve(true);\n      });\n    });\n  }\n  \n  // Criar comando de teste de impress√£o\n  createTestPrint(): Buffer {\n    const commands: Buffer[] = [];\n    \n    // Inicializar impressora\n    commands.push(ESC_POS.INIT);\n    \n    // Cabe√ßalho centralizado e grande\n    commands.push(ESC_POS.ALIGN_CENTER);\n    commands.push(ESC_POS.TEXT_DOUBLE);\n    commands.push(Buffer.from('TESTE DE IMPRESSAO\\n'));\n    commands.push(ESC_POS.TEXT_NORMAL);\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Informa√ß√µes do sistema\n    commands.push(ESC_POS.ALIGN_LEFT);\n    commands.push(Buffer.from(`Data/Hora: ${new Date().toLocaleString('pt-BR')}\\n`));\n    commands.push(Buffer.from('Sistema: ComideX Restaurant\\n'));\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Linha separadora\n    commands.push(Buffer.from('================================\\n'));\n    \n    // Teste de caracteres\n    commands.push(ESC_POS.BOLD_ON);\n    commands.push(Buffer.from('TESTE DE CARACTERES:\\n'));\n    commands.push(ESC_POS.BOLD_OFF);\n    commands.push(Buffer.from('ABCDEFGHIJKLMNOPQRSTUVWXYZ\\n'));\n    commands.push(Buffer.from('abcdefghijklmnopqrstuvwxyz\\n'));\n    commands.push(Buffer.from('0123456789\\n'));\n    commands.push(Buffer.from('!@#$%^&*()_+-=[]{}|;:,.<>?\\n'));\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Teste de alinhamento\n    commands.push(Buffer.from('================================\\n'));\n    commands.push(ESC_POS.ALIGN_LEFT);\n    commands.push(Buffer.from('Alinhado a esquerda\\n'));\n    commands.push(ESC_POS.ALIGN_CENTER);\n    commands.push(Buffer.from('Centralizado\\n'));\n    commands.push(ESC_POS.ALIGN_RIGHT);\n    commands.push(Buffer.from('Alinhado a direita\\n'));\n    commands.push(ESC_POS.ALIGN_LEFT);\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Teste de tamanhos\n    commands.push(Buffer.from('================================\\n'));\n    commands.push(ESC_POS.TEXT_NORMAL);\n    commands.push(Buffer.from('Texto normal\\n'));\n    commands.push(ESC_POS.TEXT_DOUBLE_HEIGHT);\n    commands.push(Buffer.from('Altura dupla\\n'));\n    commands.push(ESC_POS.TEXT_DOUBLE_WIDTH);\n    commands.push(Buffer.from('Largura dupla\\n'));\n    commands.push(ESC_POS.TEXT_DOUBLE);\n    commands.push(Buffer.from('Duplo\\n'));\n    commands.push(ESC_POS.TEXT_NORMAL);\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Rodap√©\n    commands.push(Buffer.from('================================\\n'));\n    commands.push(ESC_POS.ALIGN_CENTER);\n    commands.push(Buffer.from('Impressao de teste concluida!\\n'));\n    commands.push(Buffer.from('Se voce pode ler isso,\\n'));\n    commands.push(Buffer.from('a impressora esta funcionando.\\n'));\n    commands.push(ESC_POS.LINE_FEED);\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Beep e corte\n    commands.push(ESC_POS.BEEP);\n    commands.push(ESC_POS.CUT_PARTIAL);\n    \n    return Buffer.concat(commands);\n  }\n  \n  // Criar comando de pedido\n  createOrderPrint(order: any): Buffer {\n    const commands: Buffer[] = [];\n    \n    // Inicializar\n    commands.push(ESC_POS.INIT);\n    \n    // Cabe√ßalho\n    commands.push(ESC_POS.ALIGN_CENTER);\n    commands.push(ESC_POS.TEXT_DOUBLE);\n    commands.push(Buffer.from('COMIDEX RESTAURANT\\n'));\n    commands.push(ESC_POS.TEXT_NORMAL);\n    commands.push(Buffer.from('Culinaria Japonesa\\n'));\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Informa√ß√µes do pedido\n    commands.push(ESC_POS.ALIGN_LEFT);\n    commands.push(ESC_POS.BOLD_ON);\n    commands.push(Buffer.from(`PEDIDO #${order.id}\\n`));\n    commands.push(ESC_POS.BOLD_OFF);\n    commands.push(Buffer.from(`Mesa: ${order.table}\\n`));\n    commands.push(Buffer.from(`Data: ${new Date().toLocaleString('pt-BR')}\\n`));\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Itens\n    commands.push(Buffer.from('================================\\n'));\n    commands.push(ESC_POS.BOLD_ON);\n    commands.push(Buffer.from('ITENS DO PEDIDO:\\n'));\n    commands.push(ESC_POS.BOLD_OFF);\n    \n    order.items?.forEach((item: any) => {\n      commands.push(Buffer.from(`${item.quantity}x ${item.name}\\n`));\n      if (item.observations) {\n        commands.push(Buffer.from(`   OBS: ${item.observations}\\n`));\n      }\n    });\n    \n    // Total\n    commands.push(ESC_POS.LINE_FEED);\n    commands.push(Buffer.from('================================\\n'));\n    commands.push(ESC_POS.TEXT_DOUBLE_HEIGHT);\n    commands.push(Buffer.from(`TOTAL: R$ ${order.total || '0,00'}\\n`));\n    commands.push(ESC_POS.TEXT_NORMAL);\n    \n    // Rodap√©\n    commands.push(ESC_POS.LINE_FEED);\n    commands.push(ESC_POS.ALIGN_CENTER);\n    commands.push(Buffer.from('Obrigado pela preferencia!\\n'));\n    commands.push(ESC_POS.LINE_FEED);\n    commands.push(ESC_POS.LINE_FEED);\n    \n    // Corte\n    commands.push(ESC_POS.CUT_PARTIAL);\n    \n    return Buffer.concat(commands);\n  }\n  \n  // Testar conectividade com impressora\n  async testPrinterConnection(ip: string, port: number = 9100): Promise<boolean> {\n    return new Promise((resolve) => {\n      const client = new net.Socket();\n      const timeout = setTimeout(() => {\n        client.destroy();\n        resolve(false);\n      }, 2000);\n      \n      client.connect(port, ip, () => {\n        clearTimeout(timeout);\n        client.end();\n        resolve(true);\n      });\n      \n      client.on('error', () => {\n        clearTimeout(timeout);\n        resolve(false);\n      });\n    });\n  }\n  \n  // Enviar comandos ESC/POS para impressora local Windows\n  async printToLocalWindows(printerName: string, data: Buffer): Promise<boolean> {\n    try {\n      const platform = os.platform();\n      \n      if (platform !== 'win32') {\n        console.error('Este m√©todo s√≥ funciona no Windows');\n        return false;\n      }\n      \n      // Sanitizar nome da impressora\n      const safePrinterName = printerName.replace(/[^a-zA-Z0-9\\s\\-_\\.]/g, '');\n      \n      // Criar arquivo tempor√°rio com dados bin√°rios ESC/POS\n      const tempDir = os.tmpdir();\n      const fileName = `comidex-escpos-${Date.now()}.prn`;\n      const filePath = path.join(tempDir, fileName);\n      \n      // Escrever dados ESC/POS no arquivo\n      await fs.writeFile(filePath, data);\n      \n      // Tentar enviar para impressora usando copy raw data\n      try {\n        // M√©todo 1: Usar copy /b para enviar dados bin√°rios direto para porta\n        // Isso funciona se a impressora estiver em porta COM ou LPT\n        const ports = ['COM1', 'COM2', 'COM3', 'COM4', 'LPT1', 'LPT2', 'USB001', 'USB002'];\n        \n        for (const port of ports) {\n          try {\n            const command = `copy /b \"${filePath}\" ${port}:`;\n            await execAsync(command, { timeout: 3000 });\n            console.log(`‚úÖ Dados enviados para ${port}`);\n            \n            // Limpar arquivo tempor√°rio\n            setTimeout(() => fs.unlink(filePath).catch(() => {}), 1000);\n            return true;\n          } catch {}\n        }\n        \n        // M√©todo 2: Usar PowerShell com raw data\n        const psCommand = `powershell -Command \"$data = [System.IO.File]::ReadAllBytes('${filePath}'); $printer = New-Object -ComObject WScript.Network; $printer.SetDefaultPrinter('${safePrinterName}'); [System.IO.File]::WriteAllBytes('\\\\\\\\localhost\\\\${safePrinterName}', $data)\"`;\n        await execAsync(psCommand, { timeout: 5000 });\n        \n        // Limpar arquivo tempor√°rio\n        setTimeout(() => fs.unlink(filePath).catch(() => {}), 1000);\n        return true;\n        \n      } catch (error) {\n        console.error('Erro ao enviar para impressora local:', error);\n        \n        // Tentar m√©todo alternativo: print /D com dados raw\n        try {\n          const command = `print /D:\"${safePrinterName}\" \"${filePath}\"`;\n          await execAsync(command, { timeout: 5000 });\n          \n          // Limpar arquivo tempor√°rio\n          setTimeout(() => fs.unlink(filePath).catch(() => {}), 1000);\n          return true;\n        } catch {}\n      }\n      \n      // Limpar arquivo tempor√°rio em caso de falha\n      try {\n        await fs.unlink(filePath);\n      } catch {}\n      \n      return false;\n      \n    } catch (error) {\n      console.error('Erro ao imprimir localmente:', error);\n      return false;\n    }\n  }\n  \n  // M√©todo unificado para enviar impress√£o\n  async print(printer: any, data: Buffer): Promise<boolean> {\n    console.log('üñ®Ô∏è Iniciando impress√£o para:', printer.name);\n    \n    // Se for impressora local\n    if (printer.is_local) {\n      if (os.platform() === 'win32') {\n        console.log(`üíª Tentando impress√£o local Windows: ${printer.name}`);\n        const success = await this.printToLocalWindows(printer.name, data);\n        if (success) {\n          console.log('‚úÖ Impress√£o local bem-sucedida');\n          return true;\n        }\n      } else {\n        console.log('‚ö†Ô∏è Impress√£o local s√≥ funciona no Windows');\n        return false;\n      }\n    }\n    \n    // Se for impressora de rede\n    if (printer.ip_address && printer.ip_address !== 'LOCAL') {\n      console.log(`üåê Tentando impress√£o via rede: ${printer.ip_address}:${printer.port || 9100}`);\n      const success = await this.printToNetwork(\n        printer.ip_address,\n        parseInt(printer.port) || 9100,\n        data\n      );\n      if (success) {\n        console.log('‚úÖ Impress√£o via rede bem-sucedida');\n        return true;\n      }\n    }\n    \n    console.log('‚ùå Falha ao imprimir');\n    return false;\n  }\n}\n\nexport const printerService = new ThermalPrinterService();"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/mobile/order/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { ThermalPrinterService } from '@/server/printer-service'\n\n// Inst√¢ncia do servi√ßo de impress√£o\nconst printerService = new ThermalPrinterService()\n\n// POST - Criar novo pedido com integra√ß√£o completa ao sistema de impress√£o\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    \n    const data = await request.json()\n    const { table_number, items, mode, device_id } = data\n\n    if (!items || items.length === 0) {\n      return NextResponse.json(\n        { success: false, error: 'Nenhum item no pedido' },\n        { status: 400 }\n      )\n    }\n\n    // ARQUITETURA CORRETA: POS √© o comandante!\n    // Tablet NUNCA cria sess√µes, apenas usa sess√µes abertas pelo POS\n    let session = null\n    if (table_number) {\n      // Buscar mesa\n      const { data: table } = await supabase\n        .from('restaurant_tables')\n        .select('*')\n        .eq('number', table_number)\n        .single()\n\n      if (table) {\n        // Buscar sess√£o ativa - APENAS LER, NUNCA CRIAR!\n        const { data: activeSession } = await supabase\n          .from('tablet_sessoes')\n          .select('*')\n          .eq('mesa_id', table.id)\n          .eq('status', 'ativa')\n          .single()\n\n        if (activeSession) {\n          session = activeSession\n        } else {\n          // ERRO: Mesa n√£o est√° aberta no POS!\n          // O tablet n√£o pode enviar pedidos sem sess√£o aberta\n          return NextResponse.json(\n            { \n              success: false, \n              error: 'Mesa n√£o est√° aberta no caixa',\n              message: 'Por favor, solicite ao atendente para abrir a mesa antes de fazer pedidos.'\n            },\n            { status: 400 }\n          )\n        }\n      } else {\n        return NextResponse.json(\n          { \n            success: false, \n            error: 'Mesa n√£o encontrada',\n            message: `Mesa ${table_number} n√£o existe no sistema.`\n          },\n          { status: 404 }\n        )\n      }\n    }\n\n    // Calcular total do pedido\n    const total = items.reduce((sum: number, item: any) => {\n      return sum + (parseFloat(item.price) * item.quantity)\n    }, 0)\n\n    // Criar pedido com status pendente (enviado para cozinha)\n    const { data: order, error: orderError } = await supabase\n      .from('tablet_pedidos')\n      .insert({\n        sessao_id: session?.id || null,\n        numero: `PED-${Date.now()}`,\n        status: 'pendente',\n        valor_total: total,\n        observacoes: `Origem: tablet${device_id ? ` - Device: ${device_id}` : ''}`,\n        created_at: new Date().toISOString()\n      })\n      .select()\n      .single()\n\n    if (orderError) throw orderError\n\n    // Adicionar itens do pedido e agrupar por impressora\n    const orderItems = []\n    const itemsByPrinter = new Map()\n    \n    // Buscar IDs das impressoras\n    const { data: printers } = await supabase\n      .from('printers')\n      .select('id, name, ip_address, port, active')\n      .eq('active', true)\n    \n    const barPrinter = printers?.find(p => p.name === 'BAR')\n    const kitchenPrinter = printers?.find(p => p.name === 'COZINHA')\n    \n    for (const item of items) {\n      const { data: orderItem } = await supabase\n        .from('tablet_pedido_itens')\n        .insert({\n          pedido_id: order.id,\n          item_id: item.product_id,\n          quantidade: item.quantity,\n          preco_unitario: item.price,\n          preco_total: item.price * item.quantity,\n          observacoes: item.observation || null\n        })\n        .select()\n        .single()\n      \n      orderItems.push(orderItem)\n\n      // Buscar produto com informa√ß√µes completas incluindo grupo atrav√©s da categoria\n      const { data: product } = await supabase\n        .from('items')\n        .select(`\n          *,\n          categories!inner(\n            name,\n            group_id,\n            groups!inner(\n              name,\n              type\n            )\n          )\n        `)\n        .eq('id', item.product_id)\n        .single()\n\n      if (product) {\n        // Determinar impressora baseada no tipo de grupo\n        let targetPrinter = null\n        \n        // Se o grupo for bebidas, enviar para BAR, sen√£o para COZINHA\n        const groupType = product.categories?.groups?.type\n        if (groupType === 'bebidas' && barPrinter) {\n          targetPrinter = barPrinter\n          console.log(`Item ${product.name} routed to BAR printer (bebidas)`)\n        } else if (kitchenPrinter) {\n          targetPrinter = kitchenPrinter\n          console.log(`Item ${product.name} routed to COZINHA printer (${groupType || 'food'})`)\n        }\n        \n        if (targetPrinter) {\n          // Agrupar itens por impressora para otimizar impress√£o\n          if (!itemsByPrinter.has(targetPrinter.id)) {\n            itemsByPrinter.set(targetPrinter.id, {\n              printer: targetPrinter,\n              items: []\n            })\n          }\n          \n          itemsByPrinter.get(targetPrinter.id).items.push({\n            orderItem,\n            product,\n            quantity: item.quantity,\n            observation: item.observation,\n            category: product.categories?.name || 'Geral'\n          })\n        }\n      }\n    }\n\n    // Criar jobs de impress√£o para cada impressora\n    const printJobs = []\n    for (const [printerId, printerData] of itemsByPrinter) {\n      // Formatar dados do pedido para impress√£o no formato esperado pelo virtual printer\n      const orderData = {\n        id: order.numero,\n        table: table_number ? `Mesa ${table_number}` : 'S/Mesa',\n        numero_pedido: order.numero,\n        mesa: table_number || 'S/N',\n        modo: mode === 'rodizio' ? 'ROD√çZIO' : '√Ä LA CARTE',\n        items: printerData.items.map((item: any) => ({\n          quantidade: item.quantity,\n          nome: item.product.name,\n          observacao: item.observation || '',\n          categoria: item.category,\n          preco: item.product.price\n        })),\n        hora: new Date().toLocaleTimeString('pt-BR'),\n        data: new Date().toLocaleDateString('pt-BR'),\n        atendente: 'Tablet',\n        observacoes_gerais: `Pedido via Tablet${device_id ? ` - Device: ${device_id}` : ''}`,\n        total: printerData.items.reduce((sum: number, item: any) => sum + (item.product.price * item.quantity), 0),\n        printer_name: printerData.printer.name\n      }\n\n      // Criar job na fila de impress√£o\n      const { data: printJob, error: printError } = await supabase\n        .from('printer_queue')\n        .insert({\n          printer_id: printerId,\n          document_type: 'order',\n          document_data: orderData,\n          priority: mode === 'rodizio' ? 'high' : 'normal',\n          status: 'pending',\n          copies: 1,\n          created_at: new Date().toISOString()\n        })\n        .select()\n        .single()\n\n      if (printJob && !printError) {\n        printJobs.push(printJob)\n        console.log(`Print job criado: ID ${printJob.id} para impressora ${printerData.printer.name}`)\n\n        // Tentar enviar para impressora f√≠sica se estiver ativa\n        if (printerData.printer?.active && printerData.printer?.ip_address && printerData.printer?.port) {\n          try {\n            // Usar o m√©todo correto createOrderPrint\n            const printData = printerService.createOrderPrint(orderData)\n            await printerService.print(\n              printerData.printer.ip_address,\n              parseInt(printerData.printer.port),\n              printData\n            )\n            \n            // Atualizar status do job para printed\n            await supabase\n              .from('printer_queue')\n              .update({\n                status: 'printed',\n                printed_at: new Date().toISOString()\n              })\n              .eq('id', printJob.id)\n            console.log(`Print job ${printJob.id} enviado com sucesso para impressora f√≠sica`)\n          } catch (printError) {\n            console.error('Erro ao enviar para impressora f√≠sica:', printError)\n            // Job permanece como pending para retry posterior - ser√° vis√≠vel no virtual printer\n          }\n        }\n      } else if (printError) {\n        console.error('Erro ao criar print job:', printError)\n      }\n    }\n\n    // Atualizar total da sess√£o se houver\n    if (session) {\n      const newTotal = (session.valor_total || 0) + total\n      await supabase\n        .from('tablet_sessoes')\n        .update({ valor_total: newTotal })\n        .eq('id', session.id)\n    }\n\n    // Preparar resposta com informa√ß√µes de impress√£o\n    const printStatus = printJobs.length > 0 ? 'sent_to_kitchen' : 'no_printer_configured'\n    const message = printJobs.length > 0 \n      ? `Pedido enviado para cozinha! ${printJobs.length} impressora(s) notificada(s).` \n      : 'Pedido criado! Configure impressoras para envio autom√°tico √† cozinha.'\n\n    return NextResponse.json({\n      success: true,\n      order: {\n        id: order.id,\n        numero: order.numero,\n        table_number,\n        total,\n        items: orderItems,\n        session_id: session?.id,\n        created_at: order.created_at,\n        status: 'pendente',\n        print_jobs_count: printJobs.length,\n        estimated_preparation_time: printJobs.length > 0 ? '15-20 minutos' : null\n      },\n      print_status: printStatus,\n      print_jobs: printJobs.map(job => ({\n        id: job.id,\n        printer_id: job.printer_id,\n        status: job.status,\n        created_at: job.created_at\n      })),\n      message\n    })\n  } catch (error: any) {\n    console.error('Erro ao criar pedido:', error)\n    return NextResponse.json(\n      { \n        success: false,\n        error: 'Erro ao criar pedido',\n        message: error.message \n      },\n      { status: 500 }\n    )\n  }\n}\n\n// PATCH - Atualizar status do pedido\nexport async function PATCH(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const data = await request.json()\n    const { order_id, status } = data\n\n    const validStatuses = ['enviado_cozinha', 'em_preparacao', 'pronto', 'entregue', 'cancelado']\n    \n    if (!order_id) {\n      return NextResponse.json(\n        { success: false, error: 'ID do pedido n√£o fornecido' },\n        { status: 400 }\n      )\n    }\n\n    if (!validStatuses.includes(status)) {\n      return NextResponse.json(\n        { success: false, error: 'Status inv√°lido' },\n        { status: 400 }\n      )\n    }\n\n    // Atualizar status do pedido\n    const { data: updatedOrder, error } = await supabase\n      .from('tablet_pedidos')\n      .update({ \n        status,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', order_id)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    // Se o status for \"pronto\", enviar notifica√ß√£o (futura implementa√ß√£o)\n    if (status === 'pronto') {\n      console.log(`Pedido ${order_id} est√° pronto para entrega`)\n    }\n\n    return NextResponse.json({\n      success: true,\n      order: updatedOrder,\n      message: `Status atualizado para: ${status}`\n    })\n  } catch (error: any) {\n    console.error('Erro ao atualizar status do pedido:', error)\n    return NextResponse.json(\n      { \n        success: false,\n        error: 'Erro ao atualizar status do pedido',\n        message: error.message \n      },\n      { status: 500 }\n    )\n  }\n}\n\n// GET - Listar pedidos\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    \n    const searchParams = request.nextUrl.searchParams\n    const table_number = searchParams.get('table_number')\n    const device_id = searchParams.get('device_id')\n    const session_id = searchParams.get('session_id')\n    const status = searchParams.get('status')\n    \n    let query = supabase\n      .from('tablet_pedidos')\n      .select(`\n        *,\n        tablet_pedido_itens(\n          *,\n          items(name, price, image)\n        )\n      `)\n      .order('created_at', { ascending: false })\n      .limit(50)\n\n    // Filtrar por sess√£o se especificado\n    if (session_id) {\n      query = query.eq('sessao_id', session_id)\n    }\n    \n    // Filtrar por status se especificado\n    if (status) {\n      query = query.eq('status', status)\n    }\n    \n    // Filtrar por device_id se especificado\n    if (device_id) {\n      query = query.ilike('observacoes', `%Device: ${device_id}%`)\n    }\n\n    const { data: orders, error } = await query\n\n    if (error) throw error\n\n    return NextResponse.json({\n      success: true,\n      orders: orders || [],\n      total: orders?.length || 0\n    })\n  } catch (error: any) {\n    console.error('Erro ao buscar pedidos:', error)\n    return NextResponse.json(\n      { \n        success: false,\n        error: 'Erro ao buscar pedidos',\n        message: error.message \n      },\n      { status: 500 }\n    )\n  }\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEA,oCAAoC;AACpC,MAAM,iBAAiB,IAAI,uJAAqB;AAGzC,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;QAEjD,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;YAChC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAwB,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,2CAA2C;QAC3C,iEAAiE;QACjE,IAAI,UAAU;QACd,IAAI,cAAc;YAChB,cAAc;YACd,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,qBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAU,cACb,MAAM;YAET,IAAI,OAAO;gBACT,iDAAiD;gBACjD,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,kBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,MAAM,EAAE,EACtB,EAAE,CAAC,UAAU,SACb,MAAM;gBAET,IAAI,eAAe;oBACjB,UAAU;gBACZ,OAAO;oBACL,qCAAqC;oBACrC,qDAAqD;oBACrD,OAAO,gJAAY,CAAC,IAAI,CACtB;wBACE,SAAS;wBACT,OAAO;wBACP,SAAS;oBACX,GACA;wBAAE,QAAQ;oBAAI;gBAElB;YACF,OAAO;gBACL,OAAO,gJAAY,CAAC,IAAI,CACtB;oBACE,SAAS;oBACT,OAAO;oBACP,SAAS,CAAC,KAAK,EAAE,aAAa,uBAAuB,CAAC;gBACxD,GACA;oBAAE,QAAQ;gBAAI;YAElB;QACF;QAEA,2BAA2B;QAC3B,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAa;YACvC,OAAO,MAAO,WAAW,KAAK,KAAK,IAAI,KAAK,QAAQ;QACtD,GAAG;QAEH,0DAA0D;QAC1D,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SAC9C,IAAI,CAAC,kBACL,MAAM,CAAC;YACN,WAAW,SAAS,MAAM;YAC1B,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;YAC3B,QAAQ;YACR,aAAa;YACb,aAAa,CAAC,cAAc,EAAE,YAAY,CAAC,WAAW,EAAE,WAAW,GAAG,IAAI;YAC1E,YAAY,IAAI,OAAO,WAAW;QACpC,GACC,MAAM,GACN,MAAM;QAET,IAAI,YAAY,MAAM;QAEtB,qDAAqD;QACrD,MAAM,aAAa,EAAE;QACrB,MAAM,iBAAiB,IAAI;QAE3B,6BAA6B;QAC7B,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,YACL,MAAM,CAAC,sCACP,EAAE,CAAC,UAAU;QAEhB,MAAM,aAAa,UAAU,KAAK,CAAA,IAAK,EAAE,IAAI,KAAK;QAClD,MAAM,iBAAiB,UAAU,KAAK,CAAA,IAAK,EAAE,IAAI,KAAK;QAEtD,KAAK,MAAM,QAAQ,MAAO;YACxB,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,uBACL,MAAM,CAAC;gBACN,WAAW,MAAM,EAAE;gBACnB,SAAS,KAAK,UAAU;gBACxB,YAAY,KAAK,QAAQ;gBACzB,gBAAgB,KAAK,KAAK;gBAC1B,aAAa,KAAK,KAAK,GAAG,KAAK,QAAQ;gBACvC,aAAa,KAAK,WAAW,IAAI;YACnC,GACC,MAAM,GACN,MAAM;YAET,WAAW,IAAI,CAAC;YAEhB,gFAAgF;YAChF,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,SACL,MAAM,CAAC,CAAC;;;;;;;;;;QAUT,CAAC,EACA,EAAE,CAAC,MAAM,KAAK,UAAU,EACxB,MAAM;YAET,IAAI,SAAS;gBACX,iDAAiD;gBACjD,IAAI,gBAAgB;gBAEpB,8DAA8D;gBAC9D,MAAM,YAAY,QAAQ,UAAU,EAAE,QAAQ;gBAC9C,IAAI,cAAc,aAAa,YAAY;oBACzC,gBAAgB;oBAChB,QAAQ,GAAG,CAAC,CAAC,KAAK,EAAE,QAAQ,IAAI,CAAC,gCAAgC,CAAC;gBACpE,OAAO,IAAI,gBAAgB;oBACzB,gBAAgB;oBAChB,QAAQ,GAAG,CAAC,CAAC,KAAK,EAAE,QAAQ,IAAI,CAAC,4BAA4B,EAAE,aAAa,OAAO,CAAC,CAAC;gBACvF;gBAEA,IAAI,eAAe;oBACjB,uDAAuD;oBACvD,IAAI,CAAC,eAAe,GAAG,CAAC,cAAc,EAAE,GAAG;wBACzC,eAAe,GAAG,CAAC,cAAc,EAAE,EAAE;4BACnC,SAAS;4BACT,OAAO,EAAE;wBACX;oBACF;oBAEA,eAAe,GAAG,CAAC,cAAc,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC;wBAC9C;wBACA;wBACA,UAAU,KAAK,QAAQ;wBACvB,aAAa,KAAK,WAAW;wBAC7B,UAAU,QAAQ,UAAU,EAAE,QAAQ;oBACxC;gBACF;YACF;QACF;QAEA,+CAA+C;QAC/C,MAAM,YAAY,EAAE;QACpB,KAAK,MAAM,CAAC,WAAW,YAAY,IAAI,eAAgB;YACrD,mFAAmF;YACnF,MAAM,YAAY;gBAChB,IAAI,MAAM,MAAM;gBAChB,OAAO,eAAe,CAAC,KAAK,EAAE,cAAc,GAAG;gBAC/C,eAAe,MAAM,MAAM;gBAC3B,MAAM,gBAAgB;gBACtB,MAAM,SAAS,YAAY,YAAY;gBACvC,OAAO,YAAY,KAAK,CAAC,GAAG,CAAC,CAAC,OAAc,CAAC;wBAC3C,YAAY,KAAK,QAAQ;wBACzB,MAAM,KAAK,OAAO,CAAC,IAAI;wBACvB,YAAY,KAAK,WAAW,IAAI;wBAChC,WAAW,KAAK,QAAQ;wBACxB,OAAO,KAAK,OAAO,CAAC,KAAK;oBAC3B,CAAC;gBACD,MAAM,IAAI,OAAO,kBAAkB,CAAC;gBACpC,MAAM,IAAI,OAAO,kBAAkB,CAAC;gBACpC,WAAW;gBACX,oBAAoB,CAAC,iBAAiB,EAAE,YAAY,CAAC,WAAW,EAAE,WAAW,GAAG,IAAI;gBACpF,OAAO,YAAY,KAAK,CAAC,MAAM,CAAC,CAAC,KAAa,OAAc,MAAO,KAAK,OAAO,CAAC,KAAK,GAAG,KAAK,QAAQ,EAAG;gBACxG,cAAc,YAAY,OAAO,CAAC,IAAI;YACxC;YAEA,iCAAiC;YACjC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACjD,IAAI,CAAC,iBACL,MAAM,CAAC;gBACN,YAAY;gBACZ,eAAe;gBACf,eAAe;gBACf,UAAU,SAAS,YAAY,SAAS;gBACxC,QAAQ;gBACR,QAAQ;gBACR,YAAY,IAAI,OAAO,WAAW;YACpC,GACC,MAAM,GACN,MAAM;YAET,IAAI,YAAY,CAAC,YAAY;gBAC3B,UAAU,IAAI,CAAC;gBACf,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,SAAS,EAAE,CAAC,iBAAiB,EAAE,YAAY,OAAO,CAAC,IAAI,EAAE;gBAE7F,wDAAwD;gBACxD,IAAI,YAAY,OAAO,EAAE,UAAU,YAAY,OAAO,EAAE,cAAc,YAAY,OAAO,EAAE,MAAM;oBAC/F,IAAI;wBACF,yCAAyC;wBACzC,MAAM,YAAY,eAAe,gBAAgB,CAAC;wBAClD,MAAM,eAAe,KAAK,CACxB,YAAY,OAAO,CAAC,UAAU,EAC9B,SAAS,YAAY,OAAO,CAAC,IAAI,GACjC;wBAGF,uCAAuC;wBACvC,MAAM,SACH,IAAI,CAAC,iBACL,MAAM,CAAC;4BACN,QAAQ;4BACR,YAAY,IAAI,OAAO,WAAW;wBACpC,GACC,EAAE,CAAC,MAAM,SAAS,EAAE;wBACvB,QAAQ,GAAG,CAAC,CAAC,UAAU,EAAE,SAAS,EAAE,CAAC,2CAA2C,CAAC;oBACnF,EAAE,OAAO,YAAY;wBACnB,QAAQ,KAAK,CAAC,0CAA0C;oBACxD,oFAAoF;oBACtF;gBACF;YACF,OAAO,IAAI,YAAY;gBACrB,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;QAEA,sCAAsC;QACtC,IAAI,SAAS;YACX,MAAM,WAAW,CAAC,QAAQ,WAAW,IAAI,CAAC,IAAI;YAC9C,MAAM,SACH,IAAI,CAAC,kBACL,MAAM,CAAC;gBAAE,aAAa;YAAS,GAC/B,EAAE,CAAC,MAAM,QAAQ,EAAE;QACxB;QAEA,iDAAiD;QACjD,MAAM,cAAc,UAAU,MAAM,GAAG,IAAI,oBAAoB;QAC/D,MAAM,UAAU,UAAU,MAAM,GAAG,IAC/B,CAAC,6BAA6B,EAAE,UAAU,MAAM,CAAC,6BAA6B,CAAC,GAC/E;QAEJ,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;gBACL,IAAI,MAAM,EAAE;gBACZ,QAAQ,MAAM,MAAM;gBACpB;gBACA;gBACA,OAAO;gBACP,YAAY,SAAS;gBACrB,YAAY,MAAM,UAAU;gBAC5B,QAAQ;gBACR,kBAAkB,UAAU,MAAM;gBAClC,4BAA4B,UAAU,MAAM,GAAG,IAAI,kBAAkB;YACvE;YACA,cAAc;YACd,YAAY,UAAU,GAAG,CAAC,CAAA,MAAO,CAAC;oBAChC,IAAI,IAAI,EAAE;oBACV,YAAY,IAAI,UAAU;oBAC1B,QAAQ,IAAI,MAAM;oBAClB,YAAY,IAAI,UAAU;gBAC5B,CAAC;YACD;QACF;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO;QACxB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,MAAM,OAAoB;IAC9C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QACnC,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG;QAE7B,MAAM,gBAAgB;YAAC;YAAmB;YAAiB;YAAU;YAAY;SAAY;QAE7F,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAA6B,GACtD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,cAAc,QAAQ,CAAC,SAAS;YACnC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAkB,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,6BAA6B;QAC7B,MAAM,EAAE,MAAM,YAAY,EAAE,KAAK,EAAE,GAAG,MAAM,SACzC,IAAI,CAAC,kBACL,MAAM,CAAC;YACN;YACA,YAAY,IAAI,OAAO,WAAW;QACpC,GACC,EAAE,CAAC,MAAM,UACT,MAAM,GACN,MAAM;QAET,IAAI,OAAO,MAAM;QAEjB,sEAAsE;QACtE,IAAI,WAAW,UAAU;YACvB,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,SAAS,yBAAyB,CAAC;QAC3D;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;YACP,SAAS,CAAC,wBAAwB,EAAE,QAAQ;QAC9C;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO;QACxB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,eAAe,aAAa,GAAG,CAAC;QACtC,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,IAAI,QAAQ,SACT,IAAI,CAAC,kBACL,MAAM,CAAC,CAAC;;;;;;MAMT,CAAC,EACA,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC;QAET,qCAAqC;QACrC,IAAI,YAAY;YACd,QAAQ,MAAM,EAAE,CAAC,aAAa;QAChC;QAEA,qCAAqC;QACrC,IAAI,QAAQ;YACV,QAAQ,MAAM,EAAE,CAAC,UAAU;QAC7B;QAEA,wCAAwC;QACxC,IAAI,WAAW;YACb,QAAQ,MAAM,KAAK,CAAC,eAAe,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QAC7D;QAEA,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM;QAEtC,IAAI,OAAO,MAAM;QAEjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,QAAQ,UAAU,EAAE;YACpB,OAAO,QAAQ,UAAU;QAC3B;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO;QACxB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}