{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/prompt-test/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\n\n// Teste de conectividade com o workflow\nexport async function GET() {\n  const tests = []\n  \n  // Teste 1: Verificar se o workflow está respondendo\n  try {\n    const response = await fetch('http://localhost:3001/console-prompt', {\n      method: 'GET',\n      signal: AbortSignal.timeout(2000)\n    })\n    \n    if (response.ok) {\n      const data = await response.json()\n      tests.push({\n        test: 'GET /console-prompt',\n        status: 'SUCCESS',\n        statusCode: response.status,\n        data\n      })\n    } else {\n      tests.push({\n        test: 'GET /console-prompt',\n        status: 'FAILED',\n        statusCode: response.status,\n        error: `HTTP ${response.status}`\n      })\n    }\n  } catch (error: any) {\n    tests.push({\n      test: 'GET /console-prompt',\n      status: 'ERROR',\n      error: error.message,\n      cause: error.cause\n    })\n  }\n  \n  // Teste 2: Enviar um prompt de teste\n  try {\n    const response = await fetch('http://localhost:3001/console-prompt', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ \n        prompt: '[TESTE DE CONEXÃO] Este é um teste automático do sistema',\n        images: []\n      }),\n      signal: AbortSignal.timeout(2000)\n    })\n    \n    if (response.ok) {\n      const data = await response.json()\n      tests.push({\n        test: 'POST /console-prompt',\n        status: 'SUCCESS',\n        statusCode: response.status,\n        data\n      })\n    } else {\n      tests.push({\n        test: 'POST /console-prompt',\n        status: 'FAILED',\n        statusCode: response.status,\n        error: `HTTP ${response.status}`\n      })\n    }\n  } catch (error: any) {\n    tests.push({\n      test: 'POST /console-prompt',\n      status: 'ERROR',\n      error: error.message,\n      cause: error.cause\n    })\n  }\n  \n  const allPassed = tests.every(t => t.status === 'SUCCESS')\n  \n  return NextResponse.json(\n    {\n      connected: allPassed,\n      workflowPort: 3001,\n      timestamp: new Date().toISOString(),\n      tests,\n      instructions: !allPassed ? {\n        command: 'node console-prompt-workflow.js',\n        expectedPort: 3001,\n        troubleshooting: [\n          '1. Certifique-se de que o workflow está rodando',\n          '2. Verifique se a porta 3001 está livre',\n          '3. Execute: lsof -i :3001 para verificar se algo está usando a porta',\n          '4. Se necessário, mate o processo: kill -9 <PID>'\n        ]\n      } : undefined\n    },\n    { status: allPassed ? 200 : 503 }\n  )\n}"],"names":[],"mappings":";;;;AAAA;;AAGO,eAAe;IACpB,MAAM,QAAQ,EAAE;IAEhB,oDAAoD;IACpD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,wCAAwC;YACnE,QAAQ;YACR,QAAQ,YAAY,OAAO,CAAC;QAC9B;QAEA,IAAI,SAAS,EAAE,EAAE;YACf,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,CAAC;gBACT,MAAM;gBACN,QAAQ;gBACR,YAAY,SAAS,MAAM;gBAC3B;YACF;QACF,OAAO;YACL,MAAM,IAAI,CAAC;gBACT,MAAM;gBACN,QAAQ;gBACR,YAAY,SAAS,MAAM;gBAC3B,OAAO,CAAC,KAAK,EAAE,SAAS,MAAM,EAAE;YAClC;QACF;IACF,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,CAAC;YACT,MAAM;YACN,QAAQ;YACR,OAAO,MAAM,OAAO;YACpB,OAAO,MAAM,KAAK;QACpB;IACF;IAEA,qCAAqC;IACrC,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,wCAAwC;YACnE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,QAAQ;gBACR,QAAQ,EAAE;YACZ;YACA,QAAQ,YAAY,OAAO,CAAC;QAC9B;QAEA,IAAI,SAAS,EAAE,EAAE;YACf,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,CAAC;gBACT,MAAM;gBACN,QAAQ;gBACR,YAAY,SAAS,MAAM;gBAC3B;YACF;QACF,OAAO;YACL,MAAM,IAAI,CAAC;gBACT,MAAM;gBACN,QAAQ;gBACR,YAAY,SAAS,MAAM;gBAC3B,OAAO,CAAC,KAAK,EAAE,SAAS,MAAM,EAAE;YAClC;QACF;IACF,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,CAAC;YACT,MAAM;YACN,QAAQ;YACR,OAAO,MAAM,OAAO;YACpB,OAAO,MAAM,KAAK;QACpB;IACF;IAEA,MAAM,YAAY,MAAM,KAAK,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;IAEhD,OAAO,gJAAY,CAAC,IAAI,CACtB;QACE,WAAW;QACX,cAAc;QACd,WAAW,IAAI,OAAO,WAAW;QACjC;QACA,cAAc,CAAC,YAAY;YACzB,SAAS;YACT,cAAc;YACd,iBAAiB;gBACf;gBACA;gBACA;gBACA;aACD;QACH,IAAI;IACN,GACA;QAAE,QAAQ,YAAY,MAAM;IAAI;AAEpC","debugId":null}}]
}